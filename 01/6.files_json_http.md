# ğŸŒ 5-kun: Fayllar, JSON va HTTP

---

### 1. Fayl bilan ishlash â€” â€œosâ€ va â€œio/ioutilâ€

Pythonâ€™da siz `open("file.txt")` deysiz, Goâ€™da esa:

```go
package main

import (
    "fmt"
    "os"
)

func main() {
    data, err := os.ReadFile("data.txt")
    if err != nil {
        fmt.Println("Xato:", err)
        return
    }
    fmt.Println("Fayl tarkibi:", string(data))
}
```

Yozish:

```go
err := os.WriteFile("output.txt", []byte("Go juda tez!"), 0644)
if err != nil {
    fmt.Println("Yozishda xato:", err)
}
```

**Python bilan farqi:**
Goâ€™da `with open()` yoâ€˜q â€” siz xotira va fayl oqimini **oâ€˜zingiz boshqarasiz**, bu esa tezlikni oshiradi.

---

### 2. JSON bilan ishlash â€” `encoding/json`

JSON Goâ€™da **struct** bilan bogâ€˜liq.
Masalan, Djangoâ€™da siz `serializer` orqali maâ€™lumotni JSONâ€™ga oâ€˜tkazasiz, Goâ€™da esa bu `json.Marshal()` va `json.Unmarshal()` yordamida amalga oshadi.

```go
package main

import (
    "encoding/json"
    "fmt"
)

type User struct {
    Name string `json:"name"`
    Age  int    `json:"age"`
}

func main() {
    u := User{Name: "Tohir", Age: 25}

    // Struct -> JSON
    jsonData, _ := json.Marshal(u)
    fmt.Println(string(jsonData))

    // JSON -> Struct
    var newUser User
    json.Unmarshal(jsonData, &newUser)
    fmt.Println(newUser.Name, newUser.Age)
}
```

Chiqaradi:

```
{"name":"Tohir","age":25}
Tohir 25
```

**Teglar (`json:"name"`)** Pythonâ€™dagi serializer field mappingâ€™iga oâ€˜xshaydi.

---

### 3. HTTP mijoz (client) â€” tashqi APIâ€™ga soâ€˜rov yuborish

Goâ€™da `net/http` kutubxonasi bilan har qanday APIâ€™ga request yuborish mumkin.

```go
package main

import (
    "fmt"
    "io"
    "net/http"
)

func main() {
    resp, err := http.Get("https://api.github.com")
    if err != nil {
        fmt.Println("Soâ€˜rovda xato:", err)
        return
    }
    defer resp.Body.Close()

    body, _ := io.ReadAll(resp.Body)
    fmt.Println(string(body[:300])) // faqat bir qismini chiqaramiz
}
```

**Farqi:** Goâ€™da siz `requests` kutubxonasiz ishlaysiz.
Standart kutubxona yetarli â€” bu Goâ€™ning dizayn falsafasi: *â€œBoshqacha emas, toza.â€*

---

### 4. HTTP server â€” mini API yozish

Bu joyda siz ilk **Go REST endpoint**ni yozasiz.

```go
package main

import (
    "fmt"
    "net/http"
)

func helloHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, "Salom, bu Go serverdan javob!")
}

func main() {
    http.HandleFunc("/hello", helloHandler)
    fmt.Println("Server 8080-portda ishlamoqda...")
    http.ListenAndServe(":8080", nil)
}
```

chiqaradi:

```
Server 8080-portda ishlamoqda...
```

soâ€˜ngra brauzerda:
ğŸ‘‰ [http://localhost:8080/hello](http://localhost:8080/hello)
chiqadi:

```
Salom, bu Go serverdan javob!
```

---

### ğŸ§  Python bilan farqi:

* Djangoâ€™da siz `urls.py` orqali `path()` qoâ€˜shasiz, Goâ€™da esa `http.HandleFunc`.
* Django `runserver` ishlatadi, Go esa toâ€˜liq kompilyatsiyalangan web-serverni oâ€˜zi ichida yaratadi (yaâ€™ni `nginx`siz ham ishlaydi!).
* Shuning uchun Goâ€™dagi API **engilroq va tezroq**.

---

### 5. JSON javob qaytarish

Djangoâ€™da siz `JsonResponse(data)` ishlatasiz, Goâ€™da esa `json.NewEncoder(w)`.

```go
func apiHandler(w http.ResponseWriter, r *http.Request) {
    data := map[string]string{"message": "Go dan salom!"}
    w.Header().Set("Content-Type", "application/json")
    json.NewEncoder(w).Encode(data)
}

func main() {
    http.HandleFunc("/api", apiHandler)
    http.ListenAndServe(":8080", nil)
}
```

Endi `/api` endpoint sizga quyidagicha javob beradi:

```json
{"message": "Go dan salom!"}
```

---

### ğŸ§ª Amaliy mashq:

Loyiha yarating:

```
api_project/
 â”œâ”€â”€ main.go
 â””â”€â”€ data.json
```

`data.json` ichida quyidagi JSON boâ€˜lsin:

```json
[
  {"name": "Ali", "age": 22},
  {"name": "Mahliyo", "age": 24}
]
```

`main.go`:

* JSON faylni oâ€˜qisin,
* uni structâ€™ga parse qilsin,
* `/users` endpointda JSON formatda qaytarsin.

---

### ğŸ¯ Yakun:

Bugun siz:

* Fayl oâ€˜qish/yozish,
* JSON maâ€™lumotlarni serialize va deserialize qilish,
* HTTP soâ€˜rov yuborish va server yaratish
  koâ€˜nikmalarini oâ€˜rgandingiz.

Endi sizning qoâ€˜lingizda **Goâ€™da real API server** tuzish uchun barcha zarur elementlar bor.

